header {
#include <iostream>
#include <cmath>
};

start pm;

PLUS : "+";
MINUS : "-";
MUL : "*";
DIV : "\";
WS : "[ \t\r\n ]" ignore;
LP : "(";
RP : ")";
NUMBER : "[0-9]+";
POW : "^";

pm [int acc] returns [int] :
   pow[0] PLUS pm[$md.out + $acc] {$out = $pm.out;}
 | pow[0] MINUS pm[$md.out - $acc] {$out = $pm.out;}
 | pow[0] {$out = $pm.out;};

pow returns [int]:
    var POW pow {$out = std::pow($var.out, $pow.out);}
    | var {$out = $var.out;};
    
var returns [int]:
    NUMBER {$out = $NUMBER.out;}
    | LP pm RP {$out = pm.out;};





